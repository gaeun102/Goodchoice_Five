<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== #29. mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="detail">
		 
		 <!--  숙소번호가 존재하는지 알아오는 메소드  -->
		<select id="is_Exist_acom_no" parameterType="HashMap" resultType="String">
			
		   select count(*) as acom_no_cnt
		   
		   from tbl_acomodation
		   
		   where acom_no = #{acom_no}
				
		</select>
	
		
		<!-- acom_no에 해당하는 숙소정보를 가져오기  -->
		<select id="show_acom_Info" parameterType="HashMap" resultType="com.five.goodchoice.detail.model.AcomodationVO">
		
			select acom_no, fk_spec_no , fk_district_no , fk_host_no , acom_name , acom_image , address , extra_address , sur_info ,
				   nvl(parking_info,'-') , acom_latitude , acom_longitude
		    
		    from tbl_acomodation
		    
		    where acom_no =  #{acom_no}
		
		
		</select>
		
		
		<!--  	acom_no에 해당하는 숙소의 추가이미지 파일을 가져오기	-->
		<select id="show_acom_add_imgList" parameterType="HashMap" resultType="String">
			
			select acom_image_add_name
			from  tbl_acomo_add_img A join tbl_acomodation B
			on A.fk_acom_no = B.acom_no 
			where A.fk_acom_no = #{acom_no}
			order by acom_image_add_no
		
		</select>
		
		
		<!-- acom_no에 해당하는 객실의 정보 및 객실에 해당하는 추가이미지 가져오기   -->
		
		<resultMap type="HashMap" id="roomMap">
		
			<result property="room_no"         				 column="room_no" 	                javaType="String"/>
			<result property="room_type"                     column="room_type"                 javaType="String"/>
			<result property="room_image" 	                 column="room_image" 	            javaType="String"/>
			<result property="price"           				 column="price" 		            javaType="String"/>
			<result property="room_image_add_name"           column="room_image_add_name" 		javaType="String"/>
			
		</resultMap>
	  	
		<select id="show_roomList" parameterType="HashMap" resultMap="roomMap">
		
		
			select A.room_no as room_no, A.room_type as room_type ,A.room_image as room_image, A.price as price, C.room_image_add_name as room_image_add_name
			from tbl_room A 
			join tbl_acomodation B   on A.fk_acom_no = B.acom_no
			join tbl_room_add_img C  on A.room_id = C.fk_room_id
			where A.fk_acom_no = #{acom_no} 
			order by room_no
		
		
		
		</select>
		
		<!-- 호텔의 스펙넘버만 가져오기     -->
		
		<select id="show_Specno" parameterType="HashMap" resultType="com.five.goodchoice.detail.model.AcomodationVO">
			
			    select B.spec_name as spec_name
			    from  tbl_acomodation A join tbl_spec B
			    on A.fk_spec_no = B.spec_no
			    where A.acom_no = #{acom_no} and fk_category_no = 1
		
		</select>
		
		
		
</mapper>
